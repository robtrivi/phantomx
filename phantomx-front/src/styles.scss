@import "./app/shared/styles/variables";
@import "./app/shared/styles/mixins";

@import "./app/shared/styles/cards";
@import "./app/shared/styles/forms";
@import "./app/shared/styles/buttons";
@import "./app/shared/styles/tables";
@import "./app/shared/styles/badges";
@import "./app/shared/styles/pagination";
@import "./app/shared/styles/modals";
@import "./app/shared/styles/statistics";

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html,
body {
  height: 100%;
  width: 100%;
  overflow-x: hidden;
}

body {
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  transition: background-color $transition-normal, color $transition-normal;
}

body.theme-light {
  background-color: $light-bg;
  color: $light-text;

  .card {
    background-color: $light-card-bg;
    border-color: $light-border;
  }

  .form-control,
  .form-select {
    background-color: $light-card-bg;
    color: $light-text;
    border-color: $light-border;

    &:focus {
      background-color: $light-card-bg;
      color: $light-text;
    }
  }

  .table {
    color: $light-text;

    thead {
      background-color: $light-bg;
      color: $light-text;
    }

    tbody tr:hover {
      background-color: $light-bg;
    }
  }

  .modal-content {
    background-color: $light-card-bg;
    color: $light-text;
  }

  .dropdown-menu {
    background-color: $light-card-bg;
    border-color: $light-border;

    .dropdown-item {
      color: $light-text;

      &:hover {
        background-color: $light-bg;
      }
    }
  }

  .flatpickr-calendar {
    background: $light-card-bg !important;
    border-color: $light-border !important;

    .flatpickr-months,
    .flatpickr-weekdays {
      background: $light-bg !important;
    }

    .flatpickr-day {
      color: $light-text !important;

      &:hover,
      &:focus,
      &.prevMonthDay:hover,
      &.nextMonthDay:hover,
      &.prevMonthDay:focus,
      &.nextMonthDay:focus {
        background: $color-primary !important;
        color: white !important;
        border-color: $color-primary !important;
        cursor: pointer;
      }

      &.selected,
      &.selected:hover,
      &.selected:focus {
        background: $color-primary !important;
        border-color: $color-primary !important;
        color: white !important;
      }

      &.today {
        border-color: $color-primary !important;

        &:hover,
        &:focus {
          background: $color-primary !important;
          color: white !important;
        }
      }
    }

    .flatpickr-current-month {
      .flatpickr-monthDropdown-months,
      .numInputWrapper input {
        color: $light-text !important;
        background: $light-card-bg !important;
      }
    }

    .flatpickr-weekday {
      color: $light-text !important;
    }
  }
}

body.theme-dark {
  background-color: $dark-bg;
  color: $dark-text;

  .card {
    background-color: $dark-card-bg;
    border-color: $dark-border;
    color: $dark-text;
  }

  .form-control,
  .form-select,
  select.form-control,
  input.form-control,
  textarea.form-control {
    background-color: $dark-bg;
    color: $dark-text;
    border-color: $dark-border;

    &:focus {
      background-color: $dark-bg;
      color: $dark-text;
      border-color: $color-primary;
    }

    &::placeholder {
      color: $dark-text-muted;
    }

    option {
      background-color: $dark-bg;
      color: $dark-text;
    }
  }

  label {
    color: $dark-text;
  }

  .table {
    color: $dark-text;

    thead {
      background-color: $dark-bg;
      color: $dark-text;

      th {
        border-color: $dark-border;
        color: $dark-text;
      }
    }

    tbody {
      tr {
        border-color: $dark-border;

        &:hover {
          background-color: rgba(255, 255, 255, 0.05);
        }

        td {
          border-color: $dark-border;
          color: $dark-text;
        }
      }
    }
  }

  .modal-content {
    background-color: $dark-card-bg;
    color: $dark-text;

    .modal-header {
      border-color: $dark-border;
      background-color: $dark-card-bg;
      color: $dark-text;

      .close {
        color: $dark-text;
      }
    }

    .modal-body {
      background-color: $dark-card-bg;
      color: $dark-text;
    }

    .modal-footer {
      border-color: $dark-border;
      background-color: $dark-card-bg;
    }
  }

  .dropdown-menu {
    background-color: $dark-card-bg;
    border-color: $dark-border;

    .dropdown-item {
      color: $dark-text;

      &:hover,
      &:focus {
        background-color: $dark-bg;
        color: $dark-text;
      }
    }

    .dropdown-divider {
      border-color: $dark-border;
    }
  }

  .nav-tabs {
    border-bottom-color: $dark-border;

    .nav-link {
      color: $dark-text-muted;
      background-color: transparent;

      &:hover,
      &:focus {
        color: $color-primary;
        background-color: transparent;
      }

      &.active {
        color: $color-primary;
        background-color: transparent;
        border-color: transparent transparent $color-primary transparent;
      }

      &.disabled {
        color: $dark-border;
      }
    }
  }

  .btn-secondary {
    background-color: $dark-border;
    border-color: $dark-border;
    color: $dark-text;

    &:hover,
    &:focus {
      background-color: lighten($dark-border, 10%);
      border-color: lighten($dark-border, 10%);
    }
  }

  .btn-light {
    background-color: $dark-card-bg;
    border-color: $dark-border;
    color: $dark-text;

    &:hover,
    &:focus {
      background-color: lighten($dark-card-bg, 5%);
      border-color: $dark-border;
    }
  }

  .btn-link {
    color: $dark-text;

    &:hover,
    &:focus {
      color: $color-primary;
    }
  }

  .badge-light {
    background-color: $dark-border;
    color: $dark-text;
  }

  .badge-secondary {
    background-color: $dark-border;
    color: $dark-text;
  }

  .alert {
    border-color: $dark-border;
  }

  .pagination {
    display: flex;
    gap: 8px;

    .page-item {
      margin: 0;

      .page-link {
        background-color: $dark-card-bg;
        border: 1px solid $dark-border;
        color: $dark-text;
        border-radius: 8px;
        padding: 8px 16px;
        transition: all 0.3s ease;
        font-weight: 500;
        min-width: 40px;
        text-align: center;

        &:hover:not(.disabled) {
          background-color: $color-primary;
          border-color: $color-primary;
          color: white;
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        &:focus {
          box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
          outline: none;
        }
      }

      &.active .page-link {
        background-color: $color-primary;
        border-color: $color-primary;
        color: white;
        box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
        cursor: default;
      }

      &.disabled .page-link {
        background-color: $dark-card-bg;
        border-color: $dark-border;
        color: $color-secondary;
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }
    }
  }

  .breadcrumb {
    background-color: $dark-card-bg;
    border-color: $dark-border;

    .breadcrumb-item {
      color: $dark-text-muted;

      &.active {
        color: $dark-text;
      }

      a {
        color: $color-primary;
      }
    }
  }

  .list-group-item {
    background-color: $dark-card-bg;
    border-color: $dark-border;
    color: $dark-text;

    &:hover,
    &:focus {
      background-color: $dark-bg;
    }

    &.active {
      background-color: $color-primary;
      border-color: $color-primary;
    }
  }

  .spinner-border,
  .spinner-grow {
    color: $dark-text;
  }

  .text-muted {
    color: $dark-text-muted !important;
  }

  .text-dark {
    color: $dark-text !important;
  }

  .border {
    border-color: $dark-border !important;
  }

  .select2-container--bootstrap4 {
    .select2-selection {
      background-color: $dark-bg !important;
      border: 1px solid $dark-border !important;
      color: $dark-text !important;
      box-shadow: none;
    }

    .select2-selection__rendered {
      color: $dark-text !important;
    }
  }

  .select2-dropdown {
    background-color: $dark-card-bg !important;
    border-color: $dark-border !important;
  }

  .select2-results__option {
    background-color: $dark-card-bg !important;
    color: $dark-text !important;

    &:hover,
    &--highlighted {
      background-color: $dark-bg !important;
    }
  }

  .flatpickr-calendar {
    background: $dark-card-bg !important;
    border-color: $dark-border !important;

    .flatpickr-months,
    .flatpickr-weekdays {
      background: $dark-bg !important;
    }

    .flatpickr-day {
      color: $dark-text !important;

      &:hover,
      &:focus,
      &.prevMonthDay:hover,
      &.nextMonthDay:hover,
      &.prevMonthDay:focus,
      &.nextMonthDay:focus {
        background: $color-primary !important;
        color: white !important;
        border-color: $color-primary !important;
        cursor: pointer;
      }

      &.selected,
      &.selected:hover,
      &.selected:focus {
        background: $color-primary !important;
        border-color: $color-primary !important;
        color: white !important;
      }

      &.today {
        border-color: $color-primary !important;

        &:hover,
        &:focus {
          background: $color-primary !important;
          color: white !important;
        }
      }
    }
  }

  .toast {
    background-color: $dark-card-bg;
    color: $dark-text;
  }
}

.cursor-pointer {
  cursor: pointer;
}

.text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.shadow-sm {
  box-shadow: $shadow-sm !important;
}

.shadow-md {
  box-shadow: $shadow-md !important;
}

.shadow-lg {
  box-shadow: $shadow-lg !important;
}

.fade-in {
  animation: fadeIn $transition-normal ease-in;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.slide-in-right {
  animation: slideInRight $transition-normal ease-in-out;
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(100px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: $light-bg;
}

::-webkit-scrollbar-thumb {
  background: $light-border;
  border-radius: 5px;

  &:hover {
    background: $light-text-muted;
  }
}

body.theme-dark {
  ::-webkit-scrollbar-track {
    background: $dark-bg;
  }

  ::-webkit-scrollbar-thumb {
    background: $dark-border;

    &:hover {
      background: $dark-text-muted;
    }
  }
}

@media (max-width: 768px) {
  body {
    font-size: 13px;
  }

  .container-fluid {
    padding-left: 10px;
    padding-right: 10px;
  }
}

.btn-primary {
  background-color: $color-primary;
  border-color: $color-primary;

  &:hover,
  &:focus,
  &:active {
    background-color: $color-primary-dark;
    border-color: $color-primary-dark;
  }
}

.btn {
  border-radius: $border-radius-md;
  font-weight: 500;
  transition: all $transition-normal;

  &:focus {
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
  }
}

.card {
  border-radius: $border-radius-md;
  border: none;
  box-shadow: $shadow-md;
}

.form-control {
  border-radius: $border-radius-md;
  border: 1px solid $light-border;

  &:focus {
    border-color: $color-primary;
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
  }
}

.modal-content {
  border-radius: $border-radius-md;
}

.table {
  th,
  td {
    vertical-align: middle;
  }
}

body.theme-light {
  .select2-container--bootstrap4 {
    .select2-selection {
      border: 1px solid $light-border !important;
      background-color: $light-card-bg;
      border-radius: $border-radius-md;
      min-height: 38px;
      box-shadow: none;

      &:focus,
      &:hover {
        border-color: $color-primary !important;
      }
    }

    .select2-selection--single {
      .select2-selection__rendered {
        color: $light-text;
        line-height: 36px;
        padding-left: 12px;
      }

      .select2-selection__arrow {
        height: 36px;
      }
    }

    .select2-selection--multiple {
      .select2-selection__rendered {
        padding: 2px 8px;

        .select2-selection__choice {
          background-color: $color-primary;
          border-color: $color-primary;
          color: white;
          border-radius: 4px;
          padding: 2px 8px;
          margin-top: 4px;

          .select2-selection__choice__remove {
            color: white;
            margin-right: 5px;

            &:hover {
              color: rgba(255, 255, 255, 0.8);
            }
          }
        }
      }
    }

    &.select2-container--focus {
      .select2-selection {
        border-color: $color-primary;
        box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
      }
    }
  }

  .select2-dropdown {
    background-color: $light-card-bg;
    border-color: $light-border;
    border-radius: $border-radius-md;
    box-shadow: $shadow-lg;
  }

  .select2-results__option {
    color: $light-text;
    padding: 8px 12px;

    &--highlighted {
      background-color: $color-primary !important;
      color: white !important;
    }

    &[aria-selected="true"] {
      background-color: rgba(102, 126, 234, 0.1);
      color: $color-primary;
    }
  }

  .select2-search--dropdown {
    padding: 8px;

    .select2-search__field {
      border-color: $light-border;
      background-color: $light-card-bg;
      color: $light-text;
      border-radius: $border-radius-md;

      &:focus {
        border-color: $color-primary;
        outline: none;
      }
    }
  }
}

body.theme-dark {
  .select2-container--bootstrap4 {
    .select2-selection {
      border: 1px solid $dark-border !important;
      background-color: $dark-bg !important;
      border-radius: $border-radius-md;
      min-height: 38px;
      box-shadow: none;

      &:focus,
      &:hover {
        border-color: $color-primary !important;
      }
    }

    .select2-selection--single {
      .select2-selection__rendered {
        color: $dark-text;
        line-height: 36px;
        padding-left: 12px;
      }

      .select2-selection__placeholder {
        color: $dark-text-muted;
      }

      .select2-selection__arrow {
        height: 36px;

        b {
          border-color: $dark-text transparent transparent transparent;
        }
      }
    }

    .select2-selection--multiple {
      .select2-selection__rendered {
        padding: 2px 8px;

        .select2-selection__choice {
          background-color: $color-primary;
          border-color: $color-primary;
          color: white;
          border-radius: 4px;
          padding: 2px 8px;
          margin-top: 4px;

          .select2-selection__choice__remove {
            color: white;
            margin-right: 5px;

            &:hover {
              color: rgba(255, 255, 255, 0.8);
            }
          }
        }
      }
    }

    &.select2-container--focus {
      .select2-selection {
        border-color: $color-primary;
        box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
      }
    }
  }

  .select2-dropdown {
    background-color: $dark-card-bg;
    border-color: $dark-border;
    border-radius: $border-radius-md;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
  }

  .select2-results__option {
    color: $dark-text;
    padding: 8px 12px;

    &--highlighted {
      background-color: $color-primary !important;
      color: white !important;
    }

    &[aria-selected="true"] {
      background-color: rgba(102, 126, 234, 0.2);
      color: $color-primary;
    }
  }

  .select2-search--dropdown {
    padding: 8px;
    background-color: $dark-card-bg;

    .select2-search__field {
      border-color: $dark-border;
      background-color: lighten($dark-card-bg, 5%);
      color: $dark-text;
      border-radius: $border-radius-md;

      &:focus {
        border-color: $color-primary;
        outline: none;
      }

      &::placeholder {
        color: $dark-text-muted;
      }
    }
  }

  .select2-results__message {
    color: $dark-text-muted;
  }
}

.select2-container {
  width: 100% !important;
}

.select2-selection__clear {
  font-size: 1.2em;
  margin-right: 10px;
  cursor: pointer;
}

.select2-results__option--disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.form-group-hover input.form-control[readonly] {
  transition: border-color 0.15s ease-in-out;
}

.form-group-hover:hover input.form-control[readonly] {
  border-color: $color-primary !important;
}
